(()=>{"use strict";var e,t,n,i,o,r,a,c=Object.freeze({gain:.5,numSamples:256}),l=function(e){t.src=e};function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,v(i.key),i)}}function d(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function v(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!=s(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==s(t)?t:t+""}var y,m,p,g,S,b,w,q,L,k,T=function(){return d((function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"white",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"white",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;h(this,e),Object.assign(this,{canvasWidth:t,canvasHeight:n,color:i,lineColor:o,lineWidth:r}),this.pointList=[],this.circleDivisions=0,this.minData=0,this.maxData=0,Object.seal(this)}),[{key:"setFillColor",value:function(e){this.color=e}},{key:"setLineColor",value:function(e){this.lineColor=e}},{key:"setMinData",value:function(e){this.minData=e}},{key:"setMaxData",value:function(e){this.maxData=256-e}},{key:"setLineWidth",value:function(e){this.lineWidth=e}},{key:"update",value:function(e){this.pointList=[];for(var t=this.minData;t<=e.length-this.maxData;t++)this.pointList.push(25+e[t]);this.circleDivisions=2*Math.PI/this.pointList.length}},{key:"draw",value:function(e){var t=this.canvasWidth/2,n=this.canvasHeight/3;e.save(),e.lineWidth=this.lineWidth,e.fillStyle=this.color,e.strokeStyle=this.lineColor,e.beginPath();for(var i=0;i<=this.pointList.length;i++){var o=Math.cos(this.circleDivisions*i)*this.pointList[i],r=Math.sin(this.circleDivisions*i)*this.pointList[i];e.lineTo(o/2+t,r/2+n)}e.lineTo(Math.cos(0)*this.pointList[0]/2+t,Math.sin(0)*this.pointList[0]/2+n),e.fill(),e.stroke(),e.closePath(),e.restore()}}])}(),M=function(){return d((function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"white",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"white",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;h(this,e),Object.assign(this,{canvasWidth:t,canvasHeight:n,color:i,lineColor:o,lineWidth:r}),this.pointList=[],this.height=n/2,this.minData=0,this.maxData=0,Object.seal(this)}),[{key:"setFillColor",value:function(e){this.color=e}},{key:"setLineColor",value:function(e){this.lineColor=e}},{key:"setMinData",value:function(e){this.minData=e}},{key:"setMaxData",value:function(e){this.maxData=256-e}},{key:"setLineWidth",value:function(e){this.lineWidth=e}},{key:"update",value:function(e){var t=this.canvasWidth/(e.length-this.maxData);this.pointList=[];for(var n=this.minData;n<=e.length;n++){var i=(n-this.minData)*t,o=this.height+256-e[n];o>=this.canvasHeight&&(o=this.canvasHeight);var r=[i,o];n==e.length-1&&(r[0]=this.canvasWidth),this.pointList.push(r)}}},{key:"draw",value:function(e){e.save(),e.lineWidth=this.lineWidth,e.fillStyle=this.color,e.strokeStyle=this.lineColor,e.beginPath(),e.moveTo(this.pointList[0][0],this.pointList[0][1]);for(var t=1;t<this.pointList.length;t++)e.lineTo(this.pointList[t][0],this.pointList[t][1]);e.lineTo(this.canvasWidth,this.canvasHeight),e.lineTo(0,this.canvasHeight),e.lineTo(this.pointList[0][0],this.pointList[0][1]),e.fill(),e.stroke(),e.closePath(),e.restore()}}])}(),D=0,A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.useFrequency?S.getByteFrequencyData(b):S.getByteTimeDomainData(b),y.save(),y.fillStyle="black",y.globalAlpha=.1,y.fillRect(0,0,m,p),y.restore(),e.showGradient){for(var t=[],n=0;n<100;n++){var i=1*n/100,o=b[Math.round((b.length-1)*i)],r="hsl(".concat((o+D)%360,", 30%, 70%)");t.push({percent:i,color:r})}D++,g=function(e,t,n,i,o,r){var a,c=e.createLinearGradient(0,n,0,0),l=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,r=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw r}}}}(r);try{for(l.s();!(a=l.n()).done;){var s=a.value;c.addColorStop(s.percent,s.color)}}catch(e){l.e(e)}finally{l.f()}return c}(y,0,p,0,0,t),C()}e.showBars&&(w.update(b),w.draw(y)),e.showCircle&&(q.update(b),q.draw(y))},C=function(){y.save(),y.fillStyle=g,y.globalAlpha=.3,y.fillRect(0,0,m,p),y.restore()},x={showGradient:!0,showBars:!0,showCircle:!0,useFrequency:!0},H=Object.freeze({sound1:"media/New Adventure Theme.mp3"}),W=document.querySelector("#btn-play"),j=document.querySelector("#btn-pause"),O=document.querySelector("#btn-list-play"),E=document.querySelector("#btn-file-play"),F=document.querySelector("#slider-volume"),P=document.querySelector("#label-volume"),I=document.querySelector("#slider-highshelf"),z=document.querySelector("#slider-lowshelf"),B=document.querySelector("#select-song"),G=document.querySelector("#input-song"),R=document.querySelector("#cb-frequency"),U=document.querySelector("#cb-line"),V=document.querySelector("#cb-circle"),N=document.querySelector("#cb-gradient"),$=document.querySelector("#select-line-min"),J=document.querySelector("#label-line-min"),X=document.querySelector("#select-line-max"),K=document.querySelector("#label-line-max"),Q=document.querySelector("#select-line-width"),Y=document.querySelector("#label-line-width"),Z=document.querySelector("#select-line-fill"),_=document.querySelector("#select-line-stroke"),ee=document.querySelector("#select-circle-min"),te=document.querySelector("#label-circle-min"),ne=document.querySelector("#select-circle-max"),ie=document.querySelector("#label-circle-max"),oe=document.querySelector("#select-circle-width"),re=document.querySelector("#label-circle-width"),ae=document.querySelector("#select-circle-fill"),ce=document.querySelector("#select-circle-stroke"),le=function(u,s){var h,f;h=H.sound1,f=window.AudioContext||window.webkitAudioContext,e=new f,t=new Audio,l(h),n=e.createMediaElementSource(t),(i=e.createAnalyser()).fftSize=c.numSamples,(o=e.createGain()).gain.value=c.gain,(r=e.createBiquadFilter()).type="highshelf",r.frequency.setValueAtTime(1e3,e.currentTime),(a=e.createBiquadFilter()).type="lowshelf",a.frequency.setValueAtTime(1e3,e.currentTime),n.connect(r),r.connect(a),a.connect(i),i.connect(o),o.connect(e.destination);var d=document.querySelector("canvas");ue(),l(B.value),function(e,t,n,i){y=e.getContext("2d"),m=e.width,p=e.height,S=t,b=new Uint8Array(S.fftSize/2),w=new M(m,p,L=n,k=i,1),q=new T(m,p,L,k,1)}(d,i,u,s),se()},ue=function(){fe(),ve(),de(),he()},se=function e(){setTimeout(e),A(x)},he=function(){R.onclick=function(){x.useFrequency=R.checked},U.onclick=function(){x.showBars=U.checked},V.onclick=function(){x.showCircle=V.checked},N.onclick=function(){x.showGradient=N.checked}},fe=function(){W.onclick=function(n){"suspended"==e.state&&e.resume(),t.play()},j.onclick=function(e){t.pause()},O.onclick=function(e){l(B.value),W.dispatchEvent(new MouseEvent("click"))},E.onclick=function(e){var t=G.value.split(".");if("mp3"==t[t.length-1]){var n=G.files[0];l(URL.createObjectURL(n)),W.dispatchEvent(new MouseEvent("click"))}}},de=function(){Z.onchange=function(){w.setFillColor(Z.value)},_.onchange=function(){w.setLineColor(_.value)},ae.onchange=function(){q.setFillColor(ae.value)},ce.onchange=function(){q.setLineColor(ce.value)}},ve=function(){$.oninput=function(e){w.setMinData(e.target.value),J.innerHTML="Min Analyzed Data: ".concat(e.target.value)},X.oninput=function(e){w.setMaxData(e.target.value),K.innerHTML="Max Analyzed Data: ".concat(e.target.value)},Q.oninput=function(e){w.setLineWidth(e.target.value),Y.innerHTML="Line Width: ".concat(e.target.value)},ee.oninput=function(e){q.setMinData(e.target.value),te.innerHTML="Min Analyzed Data: ".concat(e.target.value)},ne.oninput=function(e){q.setMaxData(e.target.value),ie.innerHTML="Max Analyzed Data: ".concat(e.target.value)},oe.oninput=function(e){q.setLineWidth(e.target.value),re.innerHTML="Line Width: ".concat(e.target.value)},F.oninput=function(e){var t;t=e.target.value,t=Number(t),o.gain.value=t,P.innerHTML=Math.round(e.target.value/2*100)},F.dispatchEvent(new Event("input")),I.oninput=function(t){var n;n=t.target.value,r.gain.setValueAtTime(n,e.currentTime)},z.oninput=function(t){var n;n=t.target.value,a.gain.setValueAtTime(n,e.currentTime)}};function ye(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return me(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?me(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,r=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw r}}}}function me(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var pe=new XMLHttpRequest;pe.onload=function(e){console.log("In onload - HTTPS Status Code = ".concat(e.target.status));var t=e.target.responseText,n=JSON.parse(t),i=n.name,o=n.songs,r=n.colors,a=n.defaultFill,c=n.defaultStroke;document.querySelector("title").innerHTML=i,document.querySelector("header h1").innerHTML=i;var l=o.map((function(e){return'<option value="'.concat(e.link,'">').concat(e.name,"</option>")}));l[0]='<option value="'.concat(o[0].link,'" selected">').concat(o[0].name,"</option>"),l.forEach((function(e){document.querySelector("#select-song").innerHTML+=e}));var u,s="",h=ye(r);try{for(h.s();!(u=h.n()).done;){var f=u.value;f.color!=c?s+='<option value="'.concat(f.color,'">').concat(f.name,"</option>"):s+='<option value="'.concat(f.color,'" selected>').concat(f.name,"</option>")}}catch(e){h.e(e)}finally{h.f()}var d,v=ye(document.querySelectorAll(".colors"));try{for(v.s();!(d=v.n()).done;)d.value.innerHTML=s}catch(e){v.e(e)}finally{v.f()}le(a,c)},pe.onerror=function(e){return console.log("In onerror - HTTP Status Code = ".concat(e.target.status))},pe.open("GET","data/av-data.json"),pe.send()})();